<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Member Pay Dashboard</title>
  <style>
    :root{
      --bg:#0b1020;
      --panel:#111a33;
      --panel2:#0f1730;
      --line:#22305c;
      --text:#e7ecff;
      --muted:#aab5e6;
      --ok:#3ddc97;
      --warn:#ffcc66;
      --bad:#ff6b6b;
      --chip:#1b2750;
      --shadow: 0 12px 30px rgba(0,0,0,.35);
      --radius: 16px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Apple SD Gothic Neo", "Noto Sans KR", Helvetica, Arial, "Segoe UI Emoji";
      background: radial-gradient(1200px 700px at 20% 0%, #18265a 0%, rgba(24,38,90,0) 60%),
                  radial-gradient(900px 600px at 90% 10%, #22377a 0%, rgba(34,55,122,0) 55%),
                  var(--bg);
      color: var(--text);
    }
    a{color:inherit; text-decoration:none}
    button{font:inherit}
    .app{
      display:grid;
      grid-template-columns: 280px 1fr;
      min-height:100vh;
    }
    /* Sidebar */
    .sidebar{
      padding:18px 14px;
      background: linear-gradient(180deg, rgba(17,26,51,.9), rgba(10,14,32,.85));
      border-right: 1px solid var(--line);
      position: sticky;
      top:0;
      height:100vh;
      overflow:auto;
    }
    .brand{
      display:flex;
      align-items:center;
      gap:10px;
      padding:10px 10px 16px;
      border-bottom:1px solid rgba(255,255,255,.06);
      margin-bottom:14px;
    }
    .logo{
      width:38px; height:38px;
      border-radius:12px;
      background: linear-gradient(135deg, #4c6fff, #24d1ff);
      box-shadow: 0 10px 22px rgba(76,111,255,.25);
    }
    .brand h1{
      font-size:14px;
      margin:0;
      letter-spacing:.2px;
    }
    .brand small{display:block; color:var(--muted); margin-top:2px; font-weight:500}
    .nav{
      display:flex; flex-direction:column; gap:6px;
      padding:4px;
    }
    .nav a{
      display:flex; align-items:center; gap:10px;
      padding:10px 12px;
      border-radius:12px;
      color:var(--muted);
      border:1px solid transparent;
    }
    .nav a:hover{background: rgba(255,255,255,.05); color:var(--text)}
    .nav a.active{
      background: rgba(76,111,255,.14);
      border-color: rgba(76,111,255,.35);
      color: var(--text);
    }
    .nav .icon{
      width:22px; height:22px;
      display:grid; place-items:center;
      border-radius:8px;
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.06);
      font-size:12px;
    }
    .sidecard{
      margin-top:14px;
      padding:12px;
      border-radius: var(--radius);
      background: rgba(255,255,255,.04);
      border: 1px solid rgba(255,255,255,.07);
    }
    .sidecard h3{margin:0 0 8px; font-size:12px; color:var(--muted); font-weight:700}
    .kv{display:grid; gap:8px}
    .kv .row{display:flex; justify-content:space-between; gap:10px; font-size:12px}
    .pill{
      padding:4px 8px;
      border-radius:999px;
      background: rgba(61,220,151,.12);
      border:1px solid rgba(61,220,151,.35);
      color: var(--ok);
      font-weight:700;
      font-size:11px;
      white-space:nowrap;
    }
    .pill.warn{
      background: rgba(255,204,102,.12);
      border-color: rgba(255,204,102,.35);
      color: var(--warn);
    }

    /* Main */
    .main{
      padding:18px;
      max-width: 1250px;
      margin: 0 auto;
      width:100%;
    }
    .topbar{
      display:flex;
      gap:12px;
      align-items:center;
      justify-content:space-between;
      margin-bottom:16px;
    }
    .topbar .left{
      display:flex; flex-direction:column; gap:4px;
    }
    .title{margin:0; font-size:18px}
    .subtitle{margin:0; color:var(--muted); font-size:12px}
    .topbar .right{
      display:flex; align-items:center; gap:10px;
    }
    .search{
      display:flex; align-items:center; gap:8px;
      padding:10px 12px;
      border-radius: 999px;
      background: rgba(255,255,255,.04);
      border: 1px solid rgba(255,255,255,.08);
      min-width: 320px;
    }
    .search input{
      border:0; outline:0; background:transparent;
      color:var(--text);
      width:100%;
      font-size:13px;
    }
    .chip{
      padding:6px 10px;
      background: rgba(255,255,255,.05);
      border: 1px solid rgba(255,255,255,.08);
      border-radius: 999px;
      color: var(--muted);
      font-size:12px;
      cursor:pointer;
    }
    .btn{
      padding:10px 12px;
      border-radius: 12px;
      background: linear-gradient(135deg, #4c6fff, #24d1ff);
      border: 0;
      color: #06102a;
      font-weight:800;
      cursor:pointer;
      box-shadow: 0 12px 22px rgba(76,111,255,.22);
    }
    .btn.secondary{
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.10);
      color: var(--text);
      box-shadow:none;
      font-weight:700;
    }

    /* Layout blocks */
    .grid{
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap:14px;
    }
    .panel{
      background: linear-gradient(180deg, rgba(17,26,51,.72), rgba(10,14,32,.55));
      border: 1px solid rgba(255,255,255,.08);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .panel .ph{
      padding:14px 14px 12px;
      display:flex; align-items:center; justify-content:space-between; gap:10px;
      border-bottom: 1px solid rgba(255,255,255,.07);
      background: rgba(255,255,255,.03);
    }
    .panel .ph h2{
      margin:0; font-size:13px; letter-spacing:.2px;
    }
    .panel .ph .meta{color:var(--muted); font-size:12px}
    .panel .pc{padding:14px}
    .cards{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:12px;
    }
    .card{
      padding:12px;
      border-radius: 14px;
      background: rgba(255,255,255,.04);
      border: 1px solid rgba(255,255,255,.07);
      min-height: 86px;
    }
    .card .k{color:var(--muted); font-size:11px; font-weight:700}
    .card .v{margin-top:8px; font-size:18px; font-weight:900; letter-spacing:.2px}
    .card .hint{margin-top:6px; color:var(--muted); font-size:11px}
    .status{
      display:inline-flex; align-items:center; gap:6px;
      padding:5px 10px;
      border-radius: 999px;
      background: rgba(255,255,255,.04);
      border: 1px solid rgba(255,255,255,.08);
      color: var(--muted);
      font-size:12px;
      white-space:nowrap;
    }
    .dot{width:7px; height:7px; border-radius:99px; background: var(--ok)}
    .dot.warn{background: var(--warn)}
    .dot.bad{background: var(--bad)}

    /* Table */
    table{width:100%; border-collapse:separate; border-spacing:0 10px;}
    th{
      text-align:left;
      color:var(--muted);
      font-size:11px;
      font-weight:800;
      padding:0 10px 6px;
    }
    td{
      padding:12px 10px;
      background: rgba(255,255,255,.04);
      border-top:1px solid rgba(255,255,255,.07);
      border-bottom:1px solid rgba(255,255,255,.07);
      font-size:12px;
      vertical-align:middle;
    }
    tr td:first-child{
      border-left:1px solid rgba(255,255,255,.07);
      border-top-left-radius: 12px;
      border-bottom-left-radius: 12px;
    }
    tr td:last-child{
      border-right:1px solid rgba(255,255,255,.07);
      border-top-right-radius: 12px;
      border-bottom-right-radius: 12px;
    }
    .badge{
      display:inline-flex; align-items:center; gap:6px;
      padding:6px 10px;
      border-radius: 999px;
      font-size:11px;
      font-weight:800;
      background: rgba(61,220,151,.12);
      border: 1px solid rgba(61,220,151,.35);
      color: var(--ok);
      white-space:nowrap;
    }
    .badge.warn{
      background: rgba(255,204,102,.12);
      border-color: rgba(255,204,102,.35);
      color: var(--warn);
    }
    .badge.bad{
      background: rgba(255,107,107,.12);
      border-color: rgba(255,107,107,.35);
      color: var(--bad);
    }
    .mono{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace}
    .muted{color:var(--muted)}
    .row-actions{display:flex; gap:8px; flex-wrap:wrap}
    .linkbtn{
      padding:7px 10px;
      border-radius: 10px;
      background: rgba(255,255,255,.05);
      border: 1px solid rgba(255,255,255,.10);
      color: var(--text);
      font-size:11px;
      cursor:pointer;
    }
    .linkbtn.primary{
      background: rgba(76,111,255,.16);
      border-color: rgba(76,111,255,.35);
    }

    /* Modal */
    .modal-backdrop{
      position:fixed; inset:0;
      background: rgba(0,0,0,.55);
      display:none;
      align-items:center; justify-content:center;
      padding:18px;
      z-index:50;
    }
    .modal{
      width:min(720px, 100%);
      border-radius: 18px;
      background: linear-gradient(180deg, rgba(17,26,51,.95), rgba(10,14,32,.92));
      border: 1px solid rgba(255,255,255,.10);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .modal .mh{
      padding:14px;
      display:flex; align-items:center; justify-content:space-between; gap:10px;
      border-bottom: 1px solid rgba(255,255,255,.08);
    }
    .modal .mh h3{margin:0; font-size:13px}
    .modal .mc{padding:14px}
    .form{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:12px;
    }
    .field{display:flex; flex-direction:column; gap:6px}
    .field label{font-size:11px; color:var(--muted); font-weight:800}
    .field input, .field select, .field textarea{
      padding:10px 11px;
      border-radius: 12px;
      background: rgba(255,255,255,.05);
      border: 1px solid rgba(255,255,255,.10);
      color: var(--text);
      outline:none;
      font-size:13px;
    }
    .field textarea{min-height: 88px; resize:vertical}
    .modal .mf{
      padding:14px;
      border-top: 1px solid rgba(255,255,255,.08);
      display:flex; justify-content:flex-end; gap:10px;
    }
    .closex{
      background: transparent;
      border: 0;
      color: var(--muted);
      cursor:pointer;
      font-size:18px;
      padding:6px 10px;
      border-radius: 10px;
    }
    .closex:hover{background: rgba(255,255,255,.06); color: var(--text)}

    /* Responsive */
    @media (max-width: 980px){
      .app{grid-template-columns: 1fr}
      .sidebar{position:relative; height:auto}
      .grid{grid-template-columns:1fr}
      .cards{grid-template-columns:1fr}
      .search{min-width: 0; width: 100%}
      .topbar{flex-direction:column; align-items:stretch}
      .topbar .right{justify-content:space-between}
    }
  </style>
</head>
<body>
  <div class="app">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <h1>Pay Member Portal</h1>
          <small>USDT Escrow â€¢ Member</small>
        </div>
      </div>

      <nav class="nav" aria-label="Main Navigation">
        <a class="active" href="/dashboard.html" data-route="dashboard"><span class="icon">ğŸ </span>ëŒ€ì‹œë³´ë“œ</a>
        <a href="/transactions.html" data-route="transactions"><span class="icon">ğŸ§¾</span>ê±°ë˜</a>
        <a href="/listings.html" data-route="listings"><span class="icon">ğŸ“Œ</span>ë§¤ë¬¼/ì˜¤í¼</a>
        <a href="/wallet.html" data-route="wallet"><span class="icon">ğŸ”’</span>ì—ìŠ¤í¬ë¡œ</a>
        <a href="/reports.html" data-route="reports"><span class="icon">ğŸ“ˆ</span>ë¦¬í¬íŠ¸</a>
        <a href="/account.html" data-route="account"><span class="icon">ğŸ‘¤</span>ê³„ì •/ì¸ì¦</a>
      </nav>

      <div class="sidecard">
        <h3>ë‚´ ìƒíƒœ</h3>
        <div class="kv">
          <div class="row"><span class="muted">KYC</span><span class="pill" id="kycPill">Verified</span></div>
          <div class="row"><span class="muted">ë ˆë²¨</span><span class="mono">L2</span></div>
          <div class="row"><span class="muted">ì¼ì¼ í•œë„</span><span class="mono">50,000 USDT</span></div>
          <div class="row"><span class="muted">2FA</span><span class="pill warn" id="twofaPill">Off</span></div>
        </div>
      </div>

      <div class="sidecard">
        <h3>ì¤‘ìš” ê³ ì§€</h3>
        <div class="muted" style="font-size:12px; line-height:1.5">
          ë³¸ ì„œë¹„ìŠ¤ëŠ” <b>USDT ì—ìŠ¤í¬ë¡œ</b> ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤. ì›í™” ê²°ì œ/ì†¡ê¸ˆì€ ë‹¹ì‚¬ì ê°„ ì™¸ë¶€ì—ì„œ ì²˜ë¦¬í•˜ë©°,
          ì¦ë¹™ ì œì¶œ ë° ê²€í† ì— ë”°ë¼ Releaseê°€ ì§„í–‰ë©ë‹ˆë‹¤.
        </div>
      </div>
    </aside>

    <!-- Main -->
    <main class="main">
      <header class="topbar">
        <div class="left">
          <h2 class="title" id="pageTitle">ëŒ€ì‹œë³´ë“œ</h2>
          <p class="subtitle" id="pageSubtitle">ì§„í–‰ ì¤‘ ê±°ë˜ì™€ í•´ì•¼ í•  ì¼ì„ í•œëˆˆì— í™•ì¸í•˜ì„¸ìš”.</p>
        </div>
        <div class="right">
          <div class="search" role="search">
            <span class="muted">ğŸ”</span>
            <input id="searchInput" placeholder="ê±°ë˜ë²ˆí˜¸, ìƒëŒ€, ìƒíƒœë¡œ ê²€ìƒ‰â€¦" />
          </div>
          <button class="chip" id="toggleDemo">Demo Data</button>
          <button class="btn" id="newTxBtn">ìƒˆ ê±°ë˜ ì‹œì‘</button>
        </div>
      </header>

      <!-- Route: Dashboard -->
      <section class="route" id="dashboard" data-route-section="dashboard">
        <div class="panel">
          <div class="ph">
            <h2>ìš”ì•½</h2>
            <div class="status"><span class="dot"></span> ì„œë¹„ìŠ¤ ì •ìƒ</div>
          </div>
          <div class="pc">
            <div class="cards">
              <div class="card">
                <div class="k">ì§„í–‰ ì¤‘ ê±°ë˜</div>
                <div class="v" id="statActive">3</div>
                <div class="hint">Proof/Review ìƒíƒœ í¬í•¨</div>
              </div>
              <div class="card">
                <div class="k">ëŒ€ê¸° ì‘ì—…</div>
                <div class="v" id="statTodo">2</div>
                <div class="hint">ì¦ë¹™ ì œì¶œ/ìŠ¹ì¸ í•„ìš”</div>
              </div>
              <div class="card">
                <div class="k">ì—ìŠ¤í¬ë¡œ Lock</div>
                <div class="v" id="statLocked">12,500</div>
                <div class="hint">USDT</div>
              </div>
            </div>
          </div>
        </div>

        <div style="height:14px"></div>

        <div class="grid">
          <div class="panel">
            <div class="ph">
              <h2>ìµœê·¼ ê±°ë˜</h2>
              <div class="meta">ìƒíƒœ íƒ€ì„ë¼ì¸ ê¸°ë°˜</div>
            </div>
            <div class="pc">
              <table aria-label="Recent Transactions">
                <thead>
                  <tr>
                    <th>ê±°ë˜ë²ˆí˜¸</th>
                    <th>ìƒëŒ€</th>
                    <th>ê¸ˆì•¡</th>
                    <th>ìƒíƒœ</th>
                    <th>ì•¡ì…˜</th>
                  </tr>
                </thead>
                <tbody id="txTableBody"></tbody>
              </table>
            </div>
          </div>

          <div class="panel">
            <div class="ph">
              <h2>í•´ì•¼ í•  ì¼</h2>
              <div class="meta">Due soon</div>
            </div>
            <div class="pc" id="todoList" style="display:grid; gap:10px"></div>
          </div>
        </div>
      </section>

      <!-- Route: Transactions -->
      <section class="route" id="transactions" data-route-section="transactions" hidden>
        <div class="panel">
          <div class="ph">
            <h2>ê±°ë˜ ëª©ë¡</h2>
            <div class="meta">í•„í„°/ê²€ìƒ‰</div>
          </div>
          <div class="pc">
            <div style="display:flex; gap:10px; flex-wrap:wrap; margin-bottom:12px;">
              <button class="chip" data-filter="ALL">ì „ì²´</button>
              <button class="chip" data-filter="LOCKED">LOCKED</button>
              <button class="chip" data-filter="PROOF_SUBMITTED">PROOF_SUBMITTED</button>
              <button class="chip" data-filter="REVIEWING">REVIEWING</button>
              <button class="chip" data-filter="RELEASED">RELEASED</button>
              <button class="chip" data-filter="DISPUTED">DISPUTED</button>
            </div>
            <table aria-label="All Transactions">
              <thead>
                <tr>
                  <th>ê±°ë˜ë²ˆí˜¸</th>
                  <th>ìƒëŒ€</th>
                  <th>ê¸ˆì•¡</th>
                  <th>ìƒíƒœ</th>
                  <th>ì—…ë°ì´íŠ¸</th>
                  <th>ì•¡ì…˜</th>
                </tr>
              </thead>
              <tbody id="txAllTableBody"></tbody>
            </table>
          </div>
        </div>
      </section>

      <!-- Route: Listings -->
      <section class="route" id="listings" data-route-section="listings" hidden>
        <div class="panel">
          <div class="ph">
            <h2>ë§¤ë¬¼/ì˜¤í¼</h2>
            <div class="meta">ë“±ë¡ Â· í˜‘ì˜ Â· ë§¤ì¹­</div>
          </div>
          <div class="pc">
            <div style="display:flex; gap:10px; flex-wrap:wrap; margin-bottom:12px;">
              <button class="btn secondary" id="newListingBtn">ë§¤ë¬¼ ë“±ë¡</button>
              <button class="btn secondary" id="newOfferBtn">ì˜¤í¼ ìƒì„±</button>
            </div>
            <div class="muted" style="font-size:12px; line-height:1.5">
              ì´ ì˜ì—­ì€ API ì—°ë™ ì‹œ <span class="mono">/listings</span>, <span class="mono">/offers</span> ë°ì´í„°ë¥¼ í‘œì‹œí•˜ë„ë¡ í™•ì¥í•˜ì„¸ìš”.
              í˜„ì¬ëŠ” ìƒ˜í”Œ UIë§Œ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.
            </div>
          </div>
        </div>
      </section>

      <!-- Route: Wallet / Escrow -->
      <section class="route" id="wallet" data-route-section="wallet" hidden>
        <div class="panel">
          <div class="ph">
            <h2>ì—ìŠ¤í¬ë¡œ</h2>
            <div class="meta">Lock Â· Release Â· ì£¼ì†Œê´€ë¦¬</div>
          </div>
          <div class="pc">
            <div class="cards" style="grid-template-columns: repeat(2, 1fr);">
              <div class="card">
                <div class="k">ë‚´ Lock ì”ì•¡</div>
                <div class="v"><span id="escrowLocked">12,500</span> <span class="muted" style="font-size:12px">USDT</span></div>
                <div class="hint">ì§„í–‰ ì¤‘ ê±°ë˜ í•©ì‚°</div>
              </div>
              <div class="card">
                <div class="k">Release ìŠ¹ì¸ ëŒ€ê¸°</div>
                <div class="v" id="escrowPending">1</div>
                <div class="hint">Reviewing í¬í•¨</div>
              </div>
            </div>

            <div style="height:14px"></div>

            <div class="panel" style="box-shadow:none">
              <div class="ph">
                <h2>ì£¼ì†Œ í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸</h2>
                <div class="meta">ì¶œê¸ˆ/ìˆ˜ë ¹ ì£¼ì†Œ</div>
              </div>
              <div class="pc">
                <table aria-label="Whitelist">
                  <thead>
                    <tr>
                      <th>ë¼ë²¨</th>
                      <th>ë„¤íŠ¸ì›Œí¬</th>
                      <th>ì£¼ì†Œ</th>
                      <th>ì•¡ì…˜</th>
                    </tr>
                  </thead>
                  <tbody id="wlBody"></tbody>
                </table>
                <button class="btn secondary" id="addWlBtn">ì£¼ì†Œ ì¶”ê°€</button>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Route: Reports -->
      <section class="route" id="reports" data-route-section="reports" hidden>
        <div class="panel">
          <div class="ph">
            <h2>ë¦¬í¬íŠ¸</h2>
            <div class="meta">CSV/PDF ë‚´ë³´ë‚´ê¸°</div>
          </div>
          <div class="pc">
            <div class="muted" style="font-size:12px; line-height:1.6; margin-bottom:12px">
              API ì—°ë™ ì‹œ ê±°ë˜ ë‚´ì—­ì„ ê¸°ê°„ë³„ë¡œ ì¡°íšŒí•˜ì—¬ ë‹¤ìš´ë¡œë“œ ê¸°ëŠ¥ì„ ì œê³µí•˜ì„¸ìš”.
              (ì˜ˆ: <span class="mono">GET /reports/transactions?from=...&to=...</span>)
            </div>
            <div style="display:flex; gap:10px; flex-wrap:wrap">
              <button class="btn secondary" id="exportCsvBtn">CSV ë‹¤ìš´ë¡œë“œ(ìƒ˜í”Œ)</button>
              <button class="btn secondary" id="exportPdfBtn">PDF ë‹¤ìš´ë¡œë“œ(ìƒ˜í”Œ)</button>
            </div>
          </div>
        </div>
      </section>

      <!-- Route: Account -->
      <section class="route" id="account" data-route-section="account" hidden>
        <div class="panel">
          <div class="ph">
            <h2>ê³„ì •/ì¸ì¦</h2>
            <div class="meta">KYC Â· 2FA Â· ê¶Œí•œ</div>
          </div>
          <div class="pc">
            <div class="form" style="grid-template-columns: 1fr 1fr;">
              <div class="field">
                <label>ì´ë©”ì¼</label>
                <input value="member@example.com" />
              </div>
              <div class="field">
                <label>íšŒì› ìœ í˜•</label>
                <select>
                  <option>ê°œì¸</option>
                  <option selected>ë²•ì¸</option>
                </select>
              </div>
              <div class="field">
                <label>KYC ìƒíƒœ</label>
                <input value="Verified (L2)" disabled />
              </div>
              <div class="field">
                <label>2FA</label>
                <select id="twofaSelect">
                  <option value="off" selected>Off</option>
                  <option value="on">On</option>
                </select>
              </div>
              <div class="field" style="grid-column: 1 / -1;">
                <label>ë¦¬ìŠ¤í¬ ê³ ì§€ í™•ì¸</label>
                <textarea disabled>ë³¸ ì„œë¹„ìŠ¤ëŠ” USDT ì—ìŠ¤í¬ë¡œë§Œ ì œê³µí•˜ë©°, ì›í™” ê²°ì œëŠ” ë‹¹ì‚¬ì ê°„ ì™¸ë¶€ì—ì„œ ì²˜ë¦¬í•©ë‹ˆë‹¤. ì¦ë¹™ ì œì¶œ ë° ê²€í†  ê²°ê³¼ì— ë”°ë¼ Releaseê°€ ì§„í–‰ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</textarea>
              </div>
            </div>
            <div style="height:12px"></div>
            <div style="display:flex; gap:10px; flex-wrap:wrap">
              <button class="btn secondary" id="saveAccountBtn">ì €ì¥</button>
              <button class="btn secondary" id="logoutBtn">ë¡œê·¸ì•„ì›ƒ</button>
            </div>
          </div>
        </div>
      </section>

      <footer class="muted" style="padding:16px 6px; font-size:12px;">
        Â© <span id="year"></span> Pay Member Portal â€¢ Sample HTML (API ì—°ë™ ì „ UI í…œí”Œë¦¿)
      </footer>
    </main>
  </div>

  <!-- Modal -->
  <div class="modal-backdrop" id="modalBackdrop" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal">
      <div class="mh">
        <h3 id="modalTitle">ìƒˆ ê±°ë˜ ì‹œì‘</h3>
        <button class="closex" id="modalClose" aria-label="Close">Ã—</button>
      </div>
      <div class="mc" id="modalContent">
        <form id="txForm">
          <div class="form">
            <div class="field">
              <label>ìƒëŒ€(ë‹‰ë„¤ì„/ë²•ì¸ëª…)</label>
              <input name="counterparty" placeholder="ì˜ˆ: Alpha OTC" required />
            </div>
            <div class="field">
              <label>ì—­í• </label>
              <select name="role">
                <option value="buyer">Buyer</option>
                <option value="seller">Seller</option>
              </select>
            </div>
            <div class="field">
              <label>ê¸ˆì•¡(USDT)</label>
              <input name="amount" type="number" min="1" step="1" placeholder="ì˜ˆ: 5000" required />
            </div>
            <div class="field">
              <label>ë„¤íŠ¸ì›Œí¬</label>
              <select name="network">
                <option>TRON (TRC20)</option>
                <option>Ethereum (ERC20)</option>
                <option>TON</option>
                <option>Solana</option>
              </select>
            </div>
            <div class="field" style="grid-column: 1 / -1;">
              <label>ë©”ëª¨(ì¦ë¹™/í˜‘ì˜ì‚¬í•­)</label>
              <textarea name="memo" placeholder="ì˜ˆ: 1/2 15:00 ì†¡ê¸ˆ ì˜ˆì •, ì¦ë¹™ ì—…ë¡œë“œ í›„ Release ìš”ì²­"></textarea>
            </div>
          </div>
        </form>
      </div>
      <div class="mf">
        <button class="btn secondary" id="modalCancel">ì·¨ì†Œ</button>
        <button class="btn" id="modalSubmit">ìƒì„±</button>
      </div>
    </div>
  </div>

  <script>
    // -------- Demo Data (replace with API calls) --------
    const demo = {
      enabled: true,
      user: { kyc: "Verified", level:"L2", dailyLimit: 50000, twofa:false },
      whitelist: [
        { label:"Main Treasury", network:"TRC20", address:"TQp1...x9dK" },
        { label:"Cold Wallet", network:"ERC20", address:"0xA1b2...9F0e" }
      ],
      transactions: [
        { id:"TX-250102-001", counterparty:"Alpha OTC", amount:6500, status:"PROOF_SUBMITTED", updated:"2026-01-02 15:40", todo:"ì¦ë¹™ ê²€í†  ëŒ€ê¸°" },
        { id:"TX-250102-002", counterparty:"Beta Maker", amount:3000, status:"LOCKED", updated:"2026-01-02 14:10", todo:"êµ¬ë§¤ì ì¦ë¹™ ì œì¶œ ìš”ì²­" },
        { id:"TX-250101-009", counterparty:"Gamma Desk", amount:8000, status:"REVIEWING", updated:"2026-01-01 20:22", todo:"ìš´ì˜ì ìŠ¹ì¸ ëŒ€ê¸°" },
        { id:"TX-241231-120", counterparty:"Delta Trade", amount:2000, status:"RELEASED", updated:"2025-12-31 18:05", todo:"ì™„ë£Œ" },
        { id:"TX-241231-088", counterparty:"Echo OTC", amount:1500, status:"DISPUTED", updated:"2025-12-31 09:44", todo:"ë¶„ìŸ ì§„í–‰" }
      ]
    };

    const $ = (sel) => document.querySelector(sel);
    const $$ = (sel) => Array.from(document.querySelectorAll(sel));

    function statusBadge(status){
      const map = {
        "LOCKED": { cls:"warn", dot:"warn", label:"LOCKED (ì—ìŠ¤í¬ë¡œ ì ê¸ˆ)" },
        "PROOF_SUBMITTED": { cls:"warn", dot:"warn", label:"PROOF_SUBMITTED (ì¦ë¹™ ì œì¶œ)" },
        "REVIEWING": { cls:"warn", dot:"warn", label:"REVIEWING (ê²€í†  ì¤‘)" },
        "RELEASED": { cls:"", dot:"", label:"RELEASED (ì™„ë£Œ)" },
        "DISPUTED": { cls:"bad", dot:"bad", label:"DISPUTED (ë¶„ìŸ)" }
      };
      const v = map[status] || { cls:"", dot:"", label: status };
      const cls = v.cls ? `badge ${v.cls}` : "badge";
      return `<span class="${cls}"><span class="dot ${v.dot}"></span>${v.label}</span>`;
    }

    function renderSidebarStatus(){
      $("#kycPill").textContent = demo.user.kyc;
      if(demo.user.twofa){
        $("#twofaPill").textContent = "On";
        $("#twofaPill").classList.remove("warn");
      }else{
        $("#twofaPill").textContent = "Off";
        $("#twofaPill").classList.add("warn");
      }
      $("#twofaSelect").value = demo.user.twofa ? "on" : "off";
    }

    function computeStats(){
      const active = demo.transactions.filter(t => !["RELEASED"].includes(t.status)).length;
      const todo = demo.transactions.filter(t => ["LOCKED","PROOF_SUBMITTED","REVIEWING"].includes(t.status)).length;
      const locked = demo.transactions
        .filter(t => ["LOCKED","PROOF_SUBMITTED","REVIEWING"].includes(t.status))
        .reduce((s,t)=>s+t.amount,0);
      $("#statActive").textContent = active;
      $("#statTodo").textContent = todo;
      $("#statLocked").textContent = locked.toLocaleString();
      $("#escrowLocked").textContent = locked.toLocaleString();
      $("#escrowPending").textContent = demo.transactions.filter(t => ["REVIEWING"].includes(t.status)).length;
    }

    function renderDashboardTables(){
      const tbody = $("#txTableBody");
      const items = demo.transactions.slice(0,4);
      tbody.innerHTML = items.map(t => `
        <tr>
          <td class="mono">${t.id}</td>
          <td>${t.counterparty}</td>
          <td class="mono">${t.amount.toLocaleString()} USDT</td>
          <td>${statusBadge(t.status)}</td>
          <td>
            <div class="row-actions">
              <button class="linkbtn primary" data-open-tx="${t.id}">ìƒì„¸</button>
              ${t.status === "LOCKED" ? `<button class="linkbtn" data-action="request-proof" data-tx="${t.id}">ì¦ë¹™ ìš”ì²­</button>` : ""}
              ${t.status === "PROOF_SUBMITTED" ? `<button class="linkbtn" data-action="review" data-tx="${t.id}">ê²€í† </button>` : ""}
              ${t.status === "REVIEWING" ? `<button class="linkbtn" data-action="release" data-tx="${t.id}">Release ìš”ì²­</button>` : ""}
              ${t.status === "DISPUTED" ? `<button class="linkbtn" data-action="dispute" data-tx="${t.id}">ë¶„ìŸ ë³´ê¸°</button>` : ""}
            </div>
          </td>
        </tr>
      `).join("");
    }

    function renderTodo(){
      const list = $("#todoList");
      const todos = demo.transactions
        .filter(t => ["LOCKED","PROOF_SUBMITTED","REVIEWING","DISPUTED"].includes(t.status))
        .slice(0,5);

      list.innerHTML = todos.map(t => {
        const dot = t.status === "DISPUTED" ? "bad" : "warn";
        const title = t.status === "LOCKED" ? "ì¦ë¹™ ìš”ì²­/ìˆ˜ì‹  ëŒ€ê¸°"
                    : t.status === "PROOF_SUBMITTED" ? "ì¦ë¹™ ê²€í†  í•„ìš”"
                    : t.status === "REVIEWING" ? "ìŠ¹ì¸/Release ëŒ€ê¸°"
                    : "ë¶„ìŸ ì¼€ì´ìŠ¤ ì§„í–‰";
        return `
          <div class="card" style="min-height:auto">
            <div style="display:flex; justify-content:space-between; gap:10px; align-items:flex-start">
              <div>
                <div class="k">${title}</div>
                <div class="v" style="font-size:14px; margin-top:8px">${t.counterparty}</div>
                <div class="hint mono">${t.id} â€¢ ${t.amount.toLocaleString()} USDT</div>
              </div>
              <div class="status"><span class="dot ${dot}"></span>${t.status}</div>
            </div>
            <div style="display:flex; gap:8px; margin-top:10px; flex-wrap:wrap">
              <button class="linkbtn primary" data-open-tx="${t.id}">ìƒì„¸</button>
              ${t.status !== "DISPUTED" ? `<button class="linkbtn" data-action="upload-proof" data-tx="${t.id}">ì¦ë¹™ ì—…ë¡œë“œ</button>` : ""}
              <button class="linkbtn" data-action="message" data-tx="${t.id}">ë©”ì‹œì§€</button>
            </div>
          </div>
        `;
      }).join("");
    }

    function renderTransactionsAll(filter="ALL", q=""){
      const body = $("#txAllTableBody");
      let items = [...demo.transactions];

      if(filter !== "ALL") items = items.filter(t => t.status === filter);

      const query = (q || "").trim().toLowerCase();
      if(query){
        items = items.filter(t =>
          t.id.toLowerCase().includes(query) ||
          t.counterparty.toLowerCase().includes(query) ||
          t.status.toLowerCase().includes(query)
        );
      }

      body.innerHTML = items.map(t => `
        <tr>
          <td class="mono">${t.id}</td>
          <td>${t.counterparty}</td>
          <td class="mono">${t.amount.toLocaleString()} USDT</td>
          <td>${statusBadge(t.status)}</td>
          <td class="mono muted">${t.updated}</td>
          <td>
            <div class="row-actions">
              <button class="linkbtn primary" data-open-tx="${t.id}">ìƒì„¸</button>
              <button class="linkbtn" data-action="timeline" data-tx="${t.id}">íƒ€ì„ë¼ì¸</button>
              ${t.status !== "RELEASED" ? `<button class="linkbtn" data-action="dispute" data-tx="${t.id}">ë¶„ìŸ</button>` : ""}
            </div>
          </td>
        </tr>
      `).join("");
    }

    function renderWhitelist(){
      const body = $("#wlBody");
      body.innerHTML = demo.whitelist.map((w, idx) => `
        <tr>
          <td>${w.label}</td>
          <td class="mono">${w.network}</td>
          <td class="mono">${w.address}</td>
          <td>
            <div class="row-actions">
              <button class="linkbtn" data-action="copy" data-copy="${w.address}">ë³µì‚¬</button>
              <button class="linkbtn" data-action="remove-wl" data-idx="${idx}">ì‚­ì œ</button>
            </div>
          </td>
        </tr>
      `).join("");
    }

    // -------- Routing --------
    const routeMeta = {
      dashboard: { title:"ëŒ€ì‹œë³´ë“œ", sub:"ì§„í–‰ ì¤‘ ê±°ë˜ì™€ í•´ì•¼ í•  ì¼ì„ í•œëˆˆì— í™•ì¸í•˜ì„¸ìš”." },
      transactions: { title:"ê±°ë˜", sub:"ìƒíƒœë³„ë¡œ ê±°ë˜ë¥¼ ì¡°íšŒí•˜ê³  ì•¡ì…˜ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤." },
      listings: { title:"ë§¤ë¬¼/ì˜¤í¼", sub:"ë§¤ë¬¼ ë“±ë¡ê³¼ ì˜¤í¼(ë§¤ì¹­ ìš”ì²­)ë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤." },
      wallet: { title:"ì—ìŠ¤í¬ë¡œ", sub:"Lock/Release ë° ì£¼ì†Œ í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸ë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤." },
      reports: { title:"ë¦¬í¬íŠ¸", sub:"ê±°ë˜ ë‚´ì—­ ë° ìˆ˜ìˆ˜ë£Œ ë¦¬í¬íŠ¸ë¥¼ ë‹¤ìš´ë¡œë“œí•©ë‹ˆë‹¤." },
      account: { title:"ê³„ì •/ì¸ì¦", sub:"KYC/2FA ë° ê¸°ë³¸ ì •ë³´ë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤." }
    };

    function setRoute(route){
      // sections
      $$("[data-route-section]").forEach(sec => {
        sec.hidden = sec.getAttribute("data-route-section") !== route;
      });
      // nav
      $$("[data-route]").forEach(a => {
        a.classList.toggle("active", a.getAttribute("data-route") === route);
      });
      // header
      $("#pageTitle").textContent = routeMeta[route]?.title || "í˜ì´ì§€";
      $("#pageSubtitle").textContent = routeMeta[route]?.sub || "";
      // hash
      history.replaceState(null, "", `#${route}`);
    }

    // -------- Modal --------
    const backdrop = $("#modalBackdrop");
    function openModal(title){
      $("#modalTitle").textContent = title;
      backdrop.style.display = "flex";
      backdrop.setAttribute("aria-hidden", "false");
    }
    function closeModal(){
      backdrop.style.display = "none";
      backdrop.setAttribute("aria-hidden", "true");
    }

    // -------- Exports (sample) --------
    function download(filename, content, mime){
      const blob = new Blob([content], {type: mime || "text/plain"});
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = filename;
      document.body.appendChild(a);
      a.click();
      a.remove();
      URL.revokeObjectURL(url);
    }

    // -------- Wire up events --------
    let currentFilter = "ALL";

    function bindTableActions(){
      document.body.addEventListener("click", (e) => {
        const btn = e.target.closest("button");
        if(!btn) return;

        const openId = btn.getAttribute("data-open-tx");
        if(openId){
          alert(`(ìƒ˜í”Œ) ê±°ë˜ ìƒì„¸ ì—´ê¸°: ${openId}\n\nAPI ì—°ë™ ì‹œ /transactions/${openId} ì¡°íšŒ í›„ ìƒì„¸ í™”ë©´ìœ¼ë¡œ ì´ë™í•˜ì„¸ìš”.`);
          return;
        }

        const action = btn.getAttribute("data-action");
        if(!action) return;

        if(action === "copy"){
          const text = btn.getAttribute("data-copy") || "";
          navigator.clipboard?.writeText(text);
          alert("ì£¼ì†Œê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.");
          return;
        }
        if(action === "remove-wl"){
          const idx = Number(btn.getAttribute("data-idx"));
          if(Number.isFinite(idx)){
            demo.whitelist.splice(idx, 1);
            renderWhitelist();
          }
          return;
        }

        const txId = btn.getAttribute("data-tx");
        if(action === "upload-proof"){
          alert(`(ìƒ˜í”Œ) ì¦ë¹™ ì—…ë¡œë“œ: ${txId}\n\nAPI ì—°ë™ ì‹œ presigned URL ë°œê¸‰ â†’ ì—…ë¡œë“œ â†’ /proof ë“±ë¡ì„ ìˆ˜í–‰í•˜ì„¸ìš”.`);
        } else if(action === "review"){
          alert(`(ìƒ˜í”Œ) ì¦ë¹™ ê²€í† : ${txId}\n\nìš´ì˜ì/ìŠ¹ì¸ ê¶Œí•œì¼ ë•Œë§Œ ë…¸ì¶œë˜ë„ë¡ ê¶Œí•œ ì²´í¬ë¥¼ ì ìš©í•˜ì„¸ìš”.`);
        } else if(action === "release"){
          alert(`(ìƒ˜í”Œ) Release ìš”ì²­: ${txId}\n\nAPI ì—°ë™ ì‹œ /escrow/release í˜¸ì¶œ(ë‹¤ì¤‘ ìŠ¹ì¸/ì„œëª… ë“±)ë¡œ ì—°ê²°í•˜ì„¸ìš”.`);
        } else if(action === "request-proof"){
          alert(`(ìƒ˜í”Œ) ì¦ë¹™ ìš”ì²­ ë©”ì‹œì§€ ë°œì†¡: ${txId}\n\në‚´ë¶€ ë©”ì‹œì§€/í…œí”Œë¦¿ ê¸°ëŠ¥ì„ ì—°ê²°í•˜ì„¸ìš”.`);
        } else if(action === "dispute"){
          alert(`(ìƒ˜í”Œ) ë¶„ìŸ ì¼€ì´ìŠ¤: ${txId}\n\nAPI ì—°ë™ ì‹œ /dispute ìƒì„± ë° ì¼€ì´ìŠ¤ í™”ë©´ì„ êµ¬í˜„í•˜ì„¸ìš”.`);
        } else if(action === "message"){
          alert(`(ìƒ˜í”Œ) ë©”ì‹œì§€/ì±„íŒ…: ${txId}\n\nAPI ì—°ë™ ì‹œ ì±„íŒ…/ë©”ì‹œì§€ ì„œë¹„ìŠ¤(ì›¹ì†Œì¼“ ë“±)ë¡œ ì—°ê²°í•˜ì„¸ìš”.`);
        } else if(action === "timeline"){
          alert(`(ìƒ˜í”Œ) íƒ€ì„ë¼ì¸: ${txId}\n\nê±°ë˜ ìƒíƒœ ë³€ê²½ ë¡œê·¸(LOCKEDâ†’PROOFâ†’REVIEWINGâ†’RELEASED)ë¥¼ í‘œì‹œí•˜ì„¸ìš”.`);
        }
      });
    }

    function bindNav(){
      $$("[data-route]").forEach(a => {
        a.addEventListener("click", (e) => {
          e.preventDefault();
          setRoute(a.getAttribute("data-route"));
        });
      });
      window.addEventListener("hashchange", () => {
        const r = (location.hash || "#dashboard").replace("#","");
        if(routeMeta[r]) setRoute(r);
      });
    }

    function bindTopbar(){
      $("#newTxBtn").addEventListener("click", () => openModal("ìƒˆ ê±°ë˜ ì‹œì‘"));
      $("#modalClose").addEventListener("click", closeModal);
      $("#modalCancel").addEventListener("click", closeModal);
      $("#modalSubmit").addEventListener("click", () => {
        const form = $("#txForm");
        const data = Object.fromEntries(new FormData(form));
        if(!data.counterparty || !data.amount){
          alert("ìƒëŒ€ì™€ ê¸ˆì•¡ì„ ì…ë ¥í•˜ì„¸ìš”.");
          return;
        }
        // Create a demo transaction (replace with POST /transactions + POST /escrow/lock)
        const id = `TX-${Date.now().toString().slice(-6)}-NEW`;
        demo.transactions.unshift({
          id,
          counterparty: data.counterparty,
          amount: Number(data.amount),
          status: "LOCKED",
          updated: new Date().toISOString().slice(0,16).replace("T"," "),
          todo: "êµ¬ë§¤ì ì¦ë¹™ ì œì¶œ ìš”ì²­"
        });
        form.reset();
        closeModal();
        refreshAll();
        setRoute("transactions");
      });

      $("#toggleDemo").addEventListener("click", () => {
        demo.enabled = !demo.enabled;
        alert(`Demo Data: ${demo.enabled ? "ON" : "OFF"}\n\nOFFë¡œ í•´ë„ í™”ë©´ì€ ìœ ì§€ë©ë‹ˆë‹¤(ìƒ˜í”Œ). API ì—°ë™ ì‹œ ì´ ë¶€ë¶„ì„ ì‹¤ì œ fetchë¡œ êµì²´í•˜ì„¸ìš”.`);
      });

      $("#searchInput").addEventListener("input", (e) => {
        const q = e.target.value;
        renderTransactionsAll(currentFilter, q);
      });

      $$('button[data-filter]').forEach(b => {
        b.addEventListener("click", () => {
          currentFilter = b.getAttribute("data-filter");
          renderTransactionsAll(currentFilter, $("#searchInput").value);
        });
      });

      $("#addWlBtn").addEventListener("click", () => {
        const label = prompt("ë¼ë²¨(ì˜ˆ: Main Treasury)");
        if(!label) return;
        const network = prompt("ë„¤íŠ¸ì›Œí¬(ì˜ˆ: TRC20/ERC20)");
        if(!network) return;
        const address = prompt("ì£¼ì†Œ");
        if(!address) return;
        demo.whitelist.push({label, network, address});
        renderWhitelist();
      });

      $("#exportCsvBtn").addEventListener("click", () => {
        const rows = [["id","counterparty","amount","status","updated"]];
        demo.transactions.forEach(t => rows.push([t.id,t.counterparty,t.amount,t.status,t.updated]));
        const csv = rows.map(r => r.map(x => `"${String(x).replaceAll('"','""')}"`).join(",")).join("\n");
        download("transactions_sample.csv", csv, "text/csv;charset=utf-8");
      });

      $("#exportPdfBtn").addEventListener("click", () => {
        const text =
`[Sample PDF Content]
- Replace with real PDF generator on server or client (e.g., jsPDF).
- Exported at: ${new Date().toISOString()}

Transactions:
${demo.transactions.map(t => `- ${t.id} | ${t.counterparty} | ${t.amount} USDT | ${t.status} | ${t.updated}`).join("\n")}
`;
        download("transactions_sample.txt", text, "text/plain;charset=utf-8");
      });

      $("#twofaSelect").addEventListener("change", (e) => {
        demo.user.twofa = e.target.value === "on";
        renderSidebarStatus();
      });

      $("#saveAccountBtn").addEventListener("click", () => {
        alert("(ìƒ˜í”Œ) ì €ì¥ ì™„ë£Œ\n\nAPI ì—°ë™ ì‹œ PATCH /me, POST /2fa/enable ë“±ì„ í˜¸ì¶œí•˜ì„¸ìš”.");
      });
      $("#logoutBtn").addEventListener("click", () => {
        alert("(ìƒ˜í”Œ) ë¡œê·¸ì•„ì›ƒ\n\nAPI ì—°ë™ ì‹œ í† í° ì‚­ì œ í›„ ë¡œê·¸ì¸ í™”ë©´ìœ¼ë¡œ ì´ë™í•˜ì„¸ìš”.");
      });

      // Close modal when clicking backdrop
      backdrop.addEventListener("click", (e) => {
        if(e.target === backdrop) closeModal();
      });
      // ESC to close
      document.addEventListener("keydown", (e) => {
        if(e.key === "Escape" && backdrop.style.display === "flex") closeModal();
      });
    }

    function refreshAll(){
      renderSidebarStatus();
      computeStats();
      renderDashboardTables();
      renderTodo();
      renderTransactionsAll(currentFilter, $("#searchInput").value);
      renderWhitelist();
    }

    // -------- Init --------
    (function init(){
      $("#year").textContent = new Date().getFullYear();
      bindNav();
      bindTopbar();
      bindTableActions();
      refreshAll();

      const initialRoute = (location.hash || "#dashboard").replace("#","");
      setRoute(routeMeta[initialRoute] ? initialRoute : "dashboard");
    })();
  </script>
</body>
</html>